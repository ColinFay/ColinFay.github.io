<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Combining the new {rtweet} and {tidytext} - Colin Fay</title>
<meta name="description" content="About keeping your packages up to date.I’ve received recently some mails and comments asking why the code in :      Collecting tweets with R and{rtweet}        Visualising text data withggplot2  couldn’t be reproduced.Spoiler: this is due to the behavior of {tidytext}, which doesn’t acceptthe output of the new {rtweet}. The problem is almost solved (well, ithas shifted, as you’ll see below). I thought the answer to thesecomments and mails would also be the perfect occasion for me to talk alittle bit about how to return to previous versions of a package (andalso, to provide a little workaround about the current error thrown whentrying to mine the hashtags column of the {rtweet} output).New {rtweet} vs previous {tidytext}The update of {rtweet} was published on CRAN on 2017-11-16, (so after Ipublished the blogposts / slides I just mentioned). It comes with a newfeature: list columns.Problem is: you can’t pass a data frame containing list-columns tounnest_tokens in version 0.1.5 of {tidytext}. This was prevented bythe third to fifth lines of tidytext:::unnest_tokens.data.frame:if (any(!purrr::map_lgl(tbl, is.atomic))) {  stop(&quot;unnest_tokens expects all columns of input to be atomic vectors (not lists)&quot;)}Getting back to a previous version of a packageTo examplify this {rtweet} and {tidytext} issue, let’s go back in timeto previous versions of theses packages. For this, we’ll use theinstall_version() function from {devtools}:library(devtools)install_version(&quot;rtweet&quot;, version = &quot;0.4.0&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/rtweet/rtweet_0.4.0.tar.gzInstalling rtweet&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools766408992de/rtweet&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘rtweet’ ...** package ‘rtweet’ correctement décompressé et sommes MD5 vérifiées** R** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (rtweet)install_version(&quot;tidytext&quot;, version = &quot;0.1.5&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/tidytext/tidytext_0.1.5.tar.gzInstalling tidytext&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools7664a041fa4/tidytext&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘tidytext’ ...** package ‘tidytext’ correctement décompressé et sommes MD5 vérifiées** R** data*** moving datasets to lazyload DB** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (tidytext)packageVersion(&quot;rtweet&quot;)[1] ‘0.4.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’library(dplyr)rtweets04 &lt;- rtweet::search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets04)Observations: 77Variables: 35$ screen_name                    &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;...$ user_id                        &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728...$ created_at                     &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 ...$ status_id                      &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;95324813...$ text                           &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem...$ retweet_count                  &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43, 43, 6, 43, 43, 2, 43, 43, 6, 43, 0, 43, 43,...$ favorite_count                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...$ is_quote_status                &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...$ quote_status_id                &lt;chr&gt; &quot;953004640118874112&quot;, NA, &quot;953229496819306496&quot;, NA, NA, NA, NA, NA, NA, NA,...$ is_retweet                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU...$ retweet_status_id              &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;95310176...$ in_reply_to_status_status_id   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_user_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_screen_name &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ lang                           &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en...$ source                         &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter...$ media_id                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url_expanded             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls                           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls_display                   &lt;chr&gt; NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me...$ urls_expanded                  &lt;chr&gt; NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/Diagr...$ mentions_screen_name           &lt;chr&gt; &quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &quot;ma_salmon dpprdan rOpenSci OpenCageData&quot;, &quot;da...$ mentions_user_id               &lt;chr&gt; &quot;322411475&quot;, &quot;1888111382&quot;, &quot;2865404679 828915258211303424 342250615 1404653...$ symbols                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ hashtags                       &lt;chr&gt; &quot;r rstats meta ecology evolution data metaanalysis&quot;, &quot;rstats&quot;, &quot;rstats&quot;, &quot;r...$ coordinates                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_id                       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_type                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_name                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_full_name                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country_code                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_coordinates       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_type              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...With these versions, you could simply do this (as you can find in theslides):rtweets04 %&gt;%       tidytext::unnest_tokens(word, hashtags) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name      word          &lt;chr&gt;     &lt;chr&gt;1 brian_leavell         r2 brian_leavell    rstats3 brian_leavell      meta4 brian_leavell   ecology5 brian_leavell evolution{rtweet} 0.6For a while, there were an issue while trying to use the two packagestogether, as {rtweet} 0.6 was released on 2017-11-16, and {tidytext}0.1.6 on 2018-01-07. When these two versions were used together, if youtried to put the {rtweet} result into unnest_tokens(), you got anerror.Let’s simulate this behavior by updating to {rtweet} 0.6, whilestaying at {tidytext} 0.1.5.detach(&quot;package:rtweet&quot;)install.packages(&quot;rtweet&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)packageVersion(&quot;rtweet&quot;)[1] ‘0.6.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’So if I try to do the exact same thing:library(rtweet)rtweets06 &lt;- search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets06)Observations: 9Variables: 42$ status_id              &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;9532481352031723...$ created_at             &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 12:50:40...$ user_id                &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728053760&quot;,...$ screen_name            &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;, &quot;sello...$ text                   &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem. #r #rs...$ source                 &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter for iPh...$ reply_to_status_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_user_id       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_screen_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ is_quote               &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE$ is_retweet             &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE$ favorite_count         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0$ retweet_count          &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43$ hashtags               &lt;list&gt; [&lt;&quot;r&quot;, &quot;rstats&quot;, &quot;meta&quot;, &quot;ecology&quot;, &quot;evolution&quot;, &quot;data&quot;, &quot;metaanalysis&quot;&gt;, &quot;rstats&quot;...$ symbols                &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ urls_url               &lt;list&gt; [NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me/pMm6L...$ urls_t.co              &lt;list&gt; [NA, NA, NA, &quot;https://t.co/gpTEhFhfY5&quot;, &quot;https://t.co/TZdttVMrTf&quot;, &quot;https://t.co/4...$ urls_expanded_url      &lt;list&gt; [NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/DiagrammeR/...$ media_url              &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_t.co             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_expanded_url     &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_type             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_url          &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_t.co         &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_expanded_url &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_type         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ mentions_user_id       &lt;list&gt; [&quot;322411475&quot;, &quot;1888111382&quot;, &lt;&quot;2865404679&quot;, &quot;828915258211303424&quot;, &quot;342250615&quot;, &quot;140...$ mentions_screen_name   &lt;list&gt; [&quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &lt;&quot;ma_salmon&quot;, &quot;dpprdan&quot;, &quot;rOpenSci&quot;, &quot;OpenCageData&quot;&gt;...$ lang                   &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;$ quoted_status_id       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ quoted_text            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ retweet_status_id      &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;9531017606960619...$ retweet_text           &lt;chr&gt; &quot;What to do if you have a compulsive data collating problem. #r #rstats #meta #ecol...$ place_url              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_name             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_full_name        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_type             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country_code           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ geo_coords             &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ coords_coords          &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ bbox_coords            &lt;list&gt; [&lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, ...rtweets06 %&gt;%     tidytext::unnest_tokens(word, text) %&gt;%     select(screen_name, word) %&gt;%    slice(1:5)Error in unnest_tokens.data.frame(., word, text) :   unnest_tokens expects all columns of input to be atomic vectors (not lists)This doesn’t work because {rtweet} results now have list columns, whichthrows an error when we call unnest_tokens() from {tidytext} 0.1.5.The function checks if all the columns of the df are atomic.The new {tidytext} version prevents this behavior, as you can pass a dfcontaining listcolumns.# I&#39;m restarting R from RStudio here, to avaid internal error -3 in R_decompress1 error.rs.restartR()NULLRestarting R session...install.packages(&quot;tidytext&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)  There is a binary version available but the source version is later:         binary source needs_compilationtidytext  0.1.5  0.1.6             FALSEinstalling the source package ‘tidytext’ packageVersion(&quot;tidytext&quot;)[1] ‘0.1.6’library(tidytext)library(dplyr)rtweets06 %&gt;%       unnest_tokens(word, text) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name       word          &lt;chr&gt;      &lt;chr&gt;1 brian_leavell         rt2 brian_leavell kateumbers3 brian_leavell       what4 brian_leavell         to5 brian_leavell         doThis now works because {tidytext} no longer checks if all the columnsare atomic.Yet we’ve got an issue if we move to the hashtag column:rtweets06 %&gt;%       unnest_tokens(word, hashtag) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)Error in check_input(x) :   Input must be a character vector of any length or a list of character  vectors, each of which has a length of 1.In fact, the problem has moved: the function now checks at a lowerlevel: you can indeed use a df containing list-columns, but you can’tpass a list-column as input.Workaround for hashtag columnSo, as promised, here’s the workaround:library(purrr)as_vector(rtweets06$hashtags) %&gt;%       table() %&gt;%       as.data.frame() %&gt;%       arrange(Freq) %&gt;%       top_n(5)Selecting by Freq              . Freq1          data    12       ecology    13     evolution    14          meta    15  metaanalysis    16             r    17       dataviz    28       ggplot2    29   DataScience    310       rstats    9">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Colin Fay">
<meta property="og:title" content="Combining the new {rtweet} and {tidytext}">
<meta property="og:url" content="http://localhost:4000/rtweet-tidytext/">


  <meta property="og:description" content="About keeping your packages up to date.I’ve received recently some mails and comments asking why the code in :      Collecting tweets with R and{rtweet}        Visualising text data withggplot2  couldn’t be reproduced.Spoiler: this is due to the behavior of {tidytext}, which doesn’t acceptthe output of the new {rtweet}. The problem is almost solved (well, ithas shifted, as you’ll see below). I thought the answer to thesecomments and mails would also be the perfect occasion for me to talk alittle bit about how to return to previous versions of a package (andalso, to provide a little workaround about the current error thrown whentrying to mine the hashtags column of the {rtweet} output).New {rtweet} vs previous {tidytext}The update of {rtweet} was published on CRAN on 2017-11-16, (so after Ipublished the blogposts / slides I just mentioned). It comes with a newfeature: list columns.Problem is: you can’t pass a data frame containing list-columns tounnest_tokens in version 0.1.5 of {tidytext}. This was prevented bythe third to fifth lines of tidytext:::unnest_tokens.data.frame:if (any(!purrr::map_lgl(tbl, is.atomic))) {  stop(&quot;unnest_tokens expects all columns of input to be atomic vectors (not lists)&quot;)}Getting back to a previous version of a packageTo examplify this {rtweet} and {tidytext} issue, let’s go back in timeto previous versions of theses packages. For this, we’ll use theinstall_version() function from {devtools}:library(devtools)install_version(&quot;rtweet&quot;, version = &quot;0.4.0&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/rtweet/rtweet_0.4.0.tar.gzInstalling rtweet&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools766408992de/rtweet&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘rtweet’ ...** package ‘rtweet’ correctement décompressé et sommes MD5 vérifiées** R** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (rtweet)install_version(&quot;tidytext&quot;, version = &quot;0.1.5&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/tidytext/tidytext_0.1.5.tar.gzInstalling tidytext&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools7664a041fa4/tidytext&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘tidytext’ ...** package ‘tidytext’ correctement décompressé et sommes MD5 vérifiées** R** data*** moving datasets to lazyload DB** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (tidytext)packageVersion(&quot;rtweet&quot;)[1] ‘0.4.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’library(dplyr)rtweets04 &lt;- rtweet::search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets04)Observations: 77Variables: 35$ screen_name                    &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;...$ user_id                        &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728...$ created_at                     &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 ...$ status_id                      &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;95324813...$ text                           &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem...$ retweet_count                  &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43, 43, 6, 43, 43, 2, 43, 43, 6, 43, 0, 43, 43,...$ favorite_count                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...$ is_quote_status                &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...$ quote_status_id                &lt;chr&gt; &quot;953004640118874112&quot;, NA, &quot;953229496819306496&quot;, NA, NA, NA, NA, NA, NA, NA,...$ is_retweet                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU...$ retweet_status_id              &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;95310176...$ in_reply_to_status_status_id   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_user_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_screen_name &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ lang                           &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en...$ source                         &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter...$ media_id                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url_expanded             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls                           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls_display                   &lt;chr&gt; NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me...$ urls_expanded                  &lt;chr&gt; NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/Diagr...$ mentions_screen_name           &lt;chr&gt; &quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &quot;ma_salmon dpprdan rOpenSci OpenCageData&quot;, &quot;da...$ mentions_user_id               &lt;chr&gt; &quot;322411475&quot;, &quot;1888111382&quot;, &quot;2865404679 828915258211303424 342250615 1404653...$ symbols                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ hashtags                       &lt;chr&gt; &quot;r rstats meta ecology evolution data metaanalysis&quot;, &quot;rstats&quot;, &quot;rstats&quot;, &quot;r...$ coordinates                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_id                       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_type                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_name                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_full_name                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country_code                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_coordinates       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_type              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...With these versions, you could simply do this (as you can find in theslides):rtweets04 %&gt;%       tidytext::unnest_tokens(word, hashtags) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name      word          &lt;chr&gt;     &lt;chr&gt;1 brian_leavell         r2 brian_leavell    rstats3 brian_leavell      meta4 brian_leavell   ecology5 brian_leavell evolution{rtweet} 0.6For a while, there were an issue while trying to use the two packagestogether, as {rtweet} 0.6 was released on 2017-11-16, and {tidytext}0.1.6 on 2018-01-07. When these two versions were used together, if youtried to put the {rtweet} result into unnest_tokens(), you got anerror.Let’s simulate this behavior by updating to {rtweet} 0.6, whilestaying at {tidytext} 0.1.5.detach(&quot;package:rtweet&quot;)install.packages(&quot;rtweet&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)packageVersion(&quot;rtweet&quot;)[1] ‘0.6.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’So if I try to do the exact same thing:library(rtweet)rtweets06 &lt;- search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets06)Observations: 9Variables: 42$ status_id              &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;9532481352031723...$ created_at             &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 12:50:40...$ user_id                &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728053760&quot;,...$ screen_name            &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;, &quot;sello...$ text                   &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem. #r #rs...$ source                 &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter for iPh...$ reply_to_status_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_user_id       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_screen_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ is_quote               &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE$ is_retweet             &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE$ favorite_count         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0$ retweet_count          &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43$ hashtags               &lt;list&gt; [&lt;&quot;r&quot;, &quot;rstats&quot;, &quot;meta&quot;, &quot;ecology&quot;, &quot;evolution&quot;, &quot;data&quot;, &quot;metaanalysis&quot;&gt;, &quot;rstats&quot;...$ symbols                &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ urls_url               &lt;list&gt; [NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me/pMm6L...$ urls_t.co              &lt;list&gt; [NA, NA, NA, &quot;https://t.co/gpTEhFhfY5&quot;, &quot;https://t.co/TZdttVMrTf&quot;, &quot;https://t.co/4...$ urls_expanded_url      &lt;list&gt; [NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/DiagrammeR/...$ media_url              &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_t.co             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_expanded_url     &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_type             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_url          &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_t.co         &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_expanded_url &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_type         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ mentions_user_id       &lt;list&gt; [&quot;322411475&quot;, &quot;1888111382&quot;, &lt;&quot;2865404679&quot;, &quot;828915258211303424&quot;, &quot;342250615&quot;, &quot;140...$ mentions_screen_name   &lt;list&gt; [&quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &lt;&quot;ma_salmon&quot;, &quot;dpprdan&quot;, &quot;rOpenSci&quot;, &quot;OpenCageData&quot;&gt;...$ lang                   &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;$ quoted_status_id       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ quoted_text            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ retweet_status_id      &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;9531017606960619...$ retweet_text           &lt;chr&gt; &quot;What to do if you have a compulsive data collating problem. #r #rstats #meta #ecol...$ place_url              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_name             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_full_name        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_type             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country_code           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ geo_coords             &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ coords_coords          &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ bbox_coords            &lt;list&gt; [&lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, ...rtweets06 %&gt;%     tidytext::unnest_tokens(word, text) %&gt;%     select(screen_name, word) %&gt;%    slice(1:5)Error in unnest_tokens.data.frame(., word, text) :   unnest_tokens expects all columns of input to be atomic vectors (not lists)This doesn’t work because {rtweet} results now have list columns, whichthrows an error when we call unnest_tokens() from {tidytext} 0.1.5.The function checks if all the columns of the df are atomic.The new {tidytext} version prevents this behavior, as you can pass a dfcontaining listcolumns.# I&#39;m restarting R from RStudio here, to avaid internal error -3 in R_decompress1 error.rs.restartR()NULLRestarting R session...install.packages(&quot;tidytext&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)  There is a binary version available but the source version is later:         binary source needs_compilationtidytext  0.1.5  0.1.6             FALSEinstalling the source package ‘tidytext’ packageVersion(&quot;tidytext&quot;)[1] ‘0.1.6’library(tidytext)library(dplyr)rtweets06 %&gt;%       unnest_tokens(word, text) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name       word          &lt;chr&gt;      &lt;chr&gt;1 brian_leavell         rt2 brian_leavell kateumbers3 brian_leavell       what4 brian_leavell         to5 brian_leavell         doThis now works because {tidytext} no longer checks if all the columnsare atomic.Yet we’ve got an issue if we move to the hashtag column:rtweets06 %&gt;%       unnest_tokens(word, hashtag) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)Error in check_input(x) :   Input must be a character vector of any length or a list of character  vectors, each of which has a length of 1.In fact, the problem has moved: the function now checks at a lowerlevel: you can indeed use a df containing list-columns, but you can’tpass a list-column as input.Workaround for hashtag columnSo, as promised, here’s the workaround:library(purrr)as_vector(rtweets06$hashtags) %&gt;%       table() %&gt;%       as.data.frame() %&gt;%       arrange(Freq) %&gt;%       top_n(5)Selecting by Freq              . Freq1          data    12       ecology    13     evolution    14          meta    15  metaanalysis    16             r    17       dataviz    28       ggplot2    29   DataScience    310       rstats    9">



  <meta property="og:image" content="https://pbs.twimg.com/profile_banners/84618490/1545734426/1500x500">



  <meta name="twitter:site" content="@_ColinFay">
  <meta name="twitter:title" content="Combining the new {rtweet} and {tidytext}">
  <meta name="twitter:description" content="About keeping your packages up to date.I’ve received recently some mails and comments asking why the code in :      Collecting tweets with R and{rtweet}        Visualising text data withggplot2  couldn’t be reproduced.Spoiler: this is due to the behavior of {tidytext}, which doesn’t acceptthe output of the new {rtweet}. The problem is almost solved (well, ithas shifted, as you’ll see below). I thought the answer to thesecomments and mails would also be the perfect occasion for me to talk alittle bit about how to return to previous versions of a package (andalso, to provide a little workaround about the current error thrown whentrying to mine the hashtags column of the {rtweet} output).New {rtweet} vs previous {tidytext}The update of {rtweet} was published on CRAN on 2017-11-16, (so after Ipublished the blogposts / slides I just mentioned). It comes with a newfeature: list columns.Problem is: you can’t pass a data frame containing list-columns tounnest_tokens in version 0.1.5 of {tidytext}. This was prevented bythe third to fifth lines of tidytext:::unnest_tokens.data.frame:if (any(!purrr::map_lgl(tbl, is.atomic))) {  stop(&quot;unnest_tokens expects all columns of input to be atomic vectors (not lists)&quot;)}Getting back to a previous version of a packageTo examplify this {rtweet} and {tidytext} issue, let’s go back in timeto previous versions of theses packages. For this, we’ll use theinstall_version() function from {devtools}:library(devtools)install_version(&quot;rtweet&quot;, version = &quot;0.4.0&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/rtweet/rtweet_0.4.0.tar.gzInstalling rtweet&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools766408992de/rtweet&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘rtweet’ ...** package ‘rtweet’ correctement décompressé et sommes MD5 vérifiées** R** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (rtweet)install_version(&quot;tidytext&quot;, version = &quot;0.1.5&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/tidytext/tidytext_0.1.5.tar.gzInstalling tidytext&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools7664a041fa4/tidytext&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘tidytext’ ...** package ‘tidytext’ correctement décompressé et sommes MD5 vérifiées** R** data*** moving datasets to lazyload DB** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (tidytext)packageVersion(&quot;rtweet&quot;)[1] ‘0.4.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’library(dplyr)rtweets04 &lt;- rtweet::search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets04)Observations: 77Variables: 35$ screen_name                    &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;...$ user_id                        &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728...$ created_at                     &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 ...$ status_id                      &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;95324813...$ text                           &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem...$ retweet_count                  &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43, 43, 6, 43, 43, 2, 43, 43, 6, 43, 0, 43, 43,...$ favorite_count                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...$ is_quote_status                &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...$ quote_status_id                &lt;chr&gt; &quot;953004640118874112&quot;, NA, &quot;953229496819306496&quot;, NA, NA, NA, NA, NA, NA, NA,...$ is_retweet                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU...$ retweet_status_id              &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;95310176...$ in_reply_to_status_status_id   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_user_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_screen_name &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ lang                           &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en...$ source                         &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter...$ media_id                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url_expanded             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls                           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls_display                   &lt;chr&gt; NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me...$ urls_expanded                  &lt;chr&gt; NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/Diagr...$ mentions_screen_name           &lt;chr&gt; &quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &quot;ma_salmon dpprdan rOpenSci OpenCageData&quot;, &quot;da...$ mentions_user_id               &lt;chr&gt; &quot;322411475&quot;, &quot;1888111382&quot;, &quot;2865404679 828915258211303424 342250615 1404653...$ symbols                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ hashtags                       &lt;chr&gt; &quot;r rstats meta ecology evolution data metaanalysis&quot;, &quot;rstats&quot;, &quot;rstats&quot;, &quot;r...$ coordinates                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_id                       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_type                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_name                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_full_name                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country_code                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_coordinates       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_type              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...With these versions, you could simply do this (as you can find in theslides):rtweets04 %&gt;%       tidytext::unnest_tokens(word, hashtags) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name      word          &lt;chr&gt;     &lt;chr&gt;1 brian_leavell         r2 brian_leavell    rstats3 brian_leavell      meta4 brian_leavell   ecology5 brian_leavell evolution{rtweet} 0.6For a while, there were an issue while trying to use the two packagestogether, as {rtweet} 0.6 was released on 2017-11-16, and {tidytext}0.1.6 on 2018-01-07. When these two versions were used together, if youtried to put the {rtweet} result into unnest_tokens(), you got anerror.Let’s simulate this behavior by updating to {rtweet} 0.6, whilestaying at {tidytext} 0.1.5.detach(&quot;package:rtweet&quot;)install.packages(&quot;rtweet&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)packageVersion(&quot;rtweet&quot;)[1] ‘0.6.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’So if I try to do the exact same thing:library(rtweet)rtweets06 &lt;- search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets06)Observations: 9Variables: 42$ status_id              &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;9532481352031723...$ created_at             &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 12:50:40...$ user_id                &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728053760&quot;,...$ screen_name            &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;, &quot;sello...$ text                   &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem. #r #rs...$ source                 &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter for iPh...$ reply_to_status_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_user_id       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_screen_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ is_quote               &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE$ is_retweet             &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE$ favorite_count         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0$ retweet_count          &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43$ hashtags               &lt;list&gt; [&lt;&quot;r&quot;, &quot;rstats&quot;, &quot;meta&quot;, &quot;ecology&quot;, &quot;evolution&quot;, &quot;data&quot;, &quot;metaanalysis&quot;&gt;, &quot;rstats&quot;...$ symbols                &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ urls_url               &lt;list&gt; [NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me/pMm6L...$ urls_t.co              &lt;list&gt; [NA, NA, NA, &quot;https://t.co/gpTEhFhfY5&quot;, &quot;https://t.co/TZdttVMrTf&quot;, &quot;https://t.co/4...$ urls_expanded_url      &lt;list&gt; [NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/DiagrammeR/...$ media_url              &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_t.co             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_expanded_url     &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_type             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_url          &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_t.co         &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_expanded_url &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_type         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ mentions_user_id       &lt;list&gt; [&quot;322411475&quot;, &quot;1888111382&quot;, &lt;&quot;2865404679&quot;, &quot;828915258211303424&quot;, &quot;342250615&quot;, &quot;140...$ mentions_screen_name   &lt;list&gt; [&quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &lt;&quot;ma_salmon&quot;, &quot;dpprdan&quot;, &quot;rOpenSci&quot;, &quot;OpenCageData&quot;&gt;...$ lang                   &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;$ quoted_status_id       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ quoted_text            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ retweet_status_id      &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;9531017606960619...$ retweet_text           &lt;chr&gt; &quot;What to do if you have a compulsive data collating problem. #r #rstats #meta #ecol...$ place_url              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_name             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_full_name        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_type             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country_code           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ geo_coords             &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ coords_coords          &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ bbox_coords            &lt;list&gt; [&lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, ...rtweets06 %&gt;%     tidytext::unnest_tokens(word, text) %&gt;%     select(screen_name, word) %&gt;%    slice(1:5)Error in unnest_tokens.data.frame(., word, text) :   unnest_tokens expects all columns of input to be atomic vectors (not lists)This doesn’t work because {rtweet} results now have list columns, whichthrows an error when we call unnest_tokens() from {tidytext} 0.1.5.The function checks if all the columns of the df are atomic.The new {tidytext} version prevents this behavior, as you can pass a dfcontaining listcolumns.# I&#39;m restarting R from RStudio here, to avaid internal error -3 in R_decompress1 error.rs.restartR()NULLRestarting R session...install.packages(&quot;tidytext&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)  There is a binary version available but the source version is later:         binary source needs_compilationtidytext  0.1.5  0.1.6             FALSEinstalling the source package ‘tidytext’ packageVersion(&quot;tidytext&quot;)[1] ‘0.1.6’library(tidytext)library(dplyr)rtweets06 %&gt;%       unnest_tokens(word, text) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name       word          &lt;chr&gt;      &lt;chr&gt;1 brian_leavell         rt2 brian_leavell kateumbers3 brian_leavell       what4 brian_leavell         to5 brian_leavell         doThis now works because {tidytext} no longer checks if all the columnsare atomic.Yet we’ve got an issue if we move to the hashtag column:rtweets06 %&gt;%       unnest_tokens(word, hashtag) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)Error in check_input(x) :   Input must be a character vector of any length or a list of character  vectors, each of which has a length of 1.In fact, the problem has moved: the function now checks at a lowerlevel: you can indeed use a df containing list-columns, but you can’tpass a list-column as input.Workaround for hashtag columnSo, as promised, here’s the workaround:library(purrr)as_vector(rtweets06$hashtags) %&gt;%       table() %&gt;%       as.data.frame() %&gt;%       arrange(Freq) %&gt;%       top_n(5)Selecting by Freq              . Freq1          data    12       ecology    13     evolution    14          meta    15  metaanalysis    16             r    17       dataviz    28       ggplot2    29   DataScience    310       rstats    9">
  <meta name="twitter:url" content="http://localhost:4000/rtweet-tidytext/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://pbs.twimg.com/profile_banners/84618490/1545734426/1500x500">
    
  

  



  <meta property="article:published_time" content="2018-01-16T00:00:00+01:00">





  

  


<link rel="canonical" href="http://localhost:4000/rtweet-tidytext/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000",
      "logo": "https://pbs.twimg.com/profile_banners/84618490/1545734426/1500x500"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Colin Fay",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Colin Fay Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/concrete.css">
<link rel="stylesheet" href="/assets/css/normalize.css">
<link rel="stylesheet" href="/assets/css/github.css">

<script type="text/javascript" src=" "></script>

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="https://avatars1.githubusercontent.com/u/17936236?v=3&s=460" alt="Colin FAY" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Colin FAY</h3>
    
    
      <p class="author__bio" itemprop="description">
        Data Scientist & R Hacker at <a href='https://thinkr.fr/'><u>ThinkR</u></a>. Founder of <a href = 'https://data-bzh.fr'><u>Data Bzh</u></a> and cofounder of the <a href = 'http://breizhdataclub.org/'><u>Breizh Data Club</u></a>. Part of the <a href='http://www.rweekly.org'><u>RWeekly</u></a> Team.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse"><i class = 'fas fa-bars'></i></button>
    <ul class="author__urls social-icons">
      <p><b>Navigation:</b></p>
      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->

<li>
  <a href="/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> Home
  </a>
</li>
<li>
  <a href="/categories/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> Blog
  </a>
</li>
<li>
  <a href="/about/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> About
  </a>
</li>
<li>
  <a href="/talks-publications/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> Talks & Publications
  </a>
</li>
<li>
  <a href="/open-source/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> Open Source
  </a>
</li>
<li>
  <a href="/search/">
    <i class="fa fa-arrow-right" aria-hidden="true"></i> Search
  </a>
</li>
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Combining the new {rtweet} and {tidytext}">
    <meta itemprop="description" content="About keeping your packages up to date.I’ve received recently some mails and comments asking why the code in :      Collecting tweets with R and{rtweet}        Visualising text data withggplot2  couldn’t be reproduced.Spoiler: this is due to the behavior of {tidytext}, which doesn’t acceptthe output of the new {rtweet}. The problem is almost solved (well, ithas shifted, as you’ll see below). I thought the answer to thesecomments and mails would also be the perfect occasion for me to talk alittle bit about how to return to previous versions of a package (andalso, to provide a little workaround about the current error thrown whentrying to mine the hashtags column of the {rtweet} output).New {rtweet} vs previous {tidytext}The update of {rtweet} was published on CRAN on 2017-11-16, (so after Ipublished the blogposts / slides I just mentioned). It comes with a newfeature: list columns.Problem is: you can’t pass a data frame containing list-columns tounnest_tokens in version 0.1.5 of {tidytext}. This was prevented bythe third to fifth lines of tidytext:::unnest_tokens.data.frame:if (any(!purrr::map_lgl(tbl, is.atomic))) {  stop(&quot;unnest_tokens expects all columns of input to be atomic vectors (not lists)&quot;)}Getting back to a previous version of a packageTo examplify this {rtweet} and {tidytext} issue, let’s go back in timeto previous versions of theses packages. For this, we’ll use theinstall_version() function from {devtools}:library(devtools)install_version(&quot;rtweet&quot;, version = &quot;0.4.0&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/rtweet/rtweet_0.4.0.tar.gzInstalling rtweet&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools766408992de/rtweet&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘rtweet’ ...** package ‘rtweet’ correctement décompressé et sommes MD5 vérifiées** R** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (rtweet)install_version(&quot;tidytext&quot;, version = &quot;0.1.5&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)Downloading package from url: http://cran.us.r-project.org/src/contrib/Archive/tidytext/tidytext_0.1.5.tar.gzInstalling tidytext&#39;/Library/Frameworks/R.framework/Resources/bin/R&#39; --no-site-file --no-environ --no-save --no-restore --quiet CMD  \  INSTALL &#39;/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools7664a041fa4/tidytext&#39;  \  --library=&#39;/Library/Frameworks/R.framework/Versions/3.4/Resources/library&#39; --install-tests * installing *source* package ‘tidytext’ ...** package ‘tidytext’ correctement décompressé et sommes MD5 vérifiées** R** data*** moving datasets to lazyload DB** inst** tests** preparing package for lazy loading** help*** installing help indices** building package indices** installing vignettes** testing if installed package can be loaded* DONE (tidytext)packageVersion(&quot;rtweet&quot;)[1] ‘0.4.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’library(dplyr)rtweets04 &lt;- rtweet::search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets04)Observations: 77Variables: 35$ screen_name                    &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;...$ user_id                        &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728...$ created_at                     &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 ...$ status_id                      &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;95324813...$ text                           &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem...$ retweet_count                  &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43, 43, 6, 43, 43, 2, 43, 43, 6, 43, 0, 43, 43,...$ favorite_count                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...$ is_quote_status                &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...$ quote_status_id                &lt;chr&gt; &quot;953004640118874112&quot;, NA, &quot;953229496819306496&quot;, NA, NA, NA, NA, NA, NA, NA,...$ is_retweet                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU...$ retweet_status_id              &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;95310176...$ in_reply_to_status_status_id   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_user_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ in_reply_to_status_screen_name &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ lang                           &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en...$ source                         &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter...$ media_id                       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url                      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ media_url_expanded             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls                           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ urls_display                   &lt;chr&gt; NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me...$ urls_expanded                  &lt;chr&gt; NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/Diagr...$ mentions_screen_name           &lt;chr&gt; &quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &quot;ma_salmon dpprdan rOpenSci OpenCageData&quot;, &quot;da...$ mentions_user_id               &lt;chr&gt; &quot;322411475&quot;, &quot;1888111382&quot;, &quot;2865404679 828915258211303424 342250615 1404653...$ symbols                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ hashtags                       &lt;chr&gt; &quot;r rstats meta ecology evolution data metaanalysis&quot;, &quot;rstats&quot;, &quot;rstats&quot;, &quot;r...$ coordinates                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_id                       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_type                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_name                     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ place_full_name                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country_code                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ country                        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_coordinates       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...$ bounding_box_type              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...With these versions, you could simply do this (as you can find in theslides):rtweets04 %&gt;%       tidytext::unnest_tokens(word, hashtags) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name      word          &lt;chr&gt;     &lt;chr&gt;1 brian_leavell         r2 brian_leavell    rstats3 brian_leavell      meta4 brian_leavell   ecology5 brian_leavell evolution{rtweet} 0.6For a while, there were an issue while trying to use the two packagestogether, as {rtweet} 0.6 was released on 2017-11-16, and {tidytext}0.1.6 on 2018-01-07. When these two versions were used together, if youtried to put the {rtweet} result into unnest_tokens(), you got anerror.Let’s simulate this behavior by updating to {rtweet} 0.6, whilestaying at {tidytext} 0.1.5.detach(&quot;package:rtweet&quot;)install.packages(&quot;rtweet&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)packageVersion(&quot;rtweet&quot;)[1] ‘0.6.0’packageVersion(&quot;tidytext&quot;)[1] ‘0.1.5’So if I try to do the exact same thing:library(rtweet)rtweets06 &lt;- search_tweets(&quot;#RStats&quot;, n = 10)Searching for tweets...Finished collecting tweets! glimpse(rtweets06)Observations: 9Variables: 42$ status_id              &lt;chr&gt; &quot;953248371606736896&quot;, &quot;953248285497573376&quot;, &quot;953248203708694528&quot;, &quot;9532481352031723...$ created_at             &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 12:50:40...$ user_id                &lt;chr&gt; &quot;770639488645300225&quot;, &quot;1445945130&quot;, &quot;1404653376&quot;, &quot;15199563&quot;, &quot;893499404728053760&quot;,...$ screen_name            &lt;chr&gt; &quot;brian_leavell&quot;, &quot;Pranesh___K&quot;, &quot;OpenCageData&quot;, &quot;haseebmahmud&quot;, &quot;XihongLin&quot;, &quot;sello...$ text                   &lt;chr&gt; &quot;RT @kateumbers: What to do if you have a compulsive data collating problem. #r #rs...$ source                 &lt;chr&gt; &quot;Twitter for Android&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter Web Client&quot;, &quot;Twitter for iPh...$ reply_to_status_id     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_user_id       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ reply_to_screen_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ is_quote               &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE$ is_retweet             &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE$ favorite_count         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0$ retweet_count          &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43$ hashtags               &lt;list&gt; [&lt;&quot;r&quot;, &quot;rstats&quot;, &quot;meta&quot;, &quot;ecology&quot;, &quot;evolution&quot;, &quot;data&quot;, &quot;metaanalysis&quot;&gt;, &quot;rstats&quot;...$ symbols                &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ urls_url               &lt;list&gt; [NA, NA, NA, &quot;buff.ly/2DyyumE&quot;, &quot;rich-iannone.github.io/DiagrammeR/&quot;, &quot;wp.me/pMm6L...$ urls_t.co              &lt;list&gt; [NA, NA, NA, &quot;https://t.co/gpTEhFhfY5&quot;, &quot;https://t.co/TZdttVMrTf&quot;, &quot;https://t.co/4...$ urls_expanded_url      &lt;list&gt; [NA, NA, NA, &quot;https://buff.ly/2DyyumE&quot;, &quot;http://rich-iannone.github.io/DiagrammeR/...$ media_url              &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_t.co             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_expanded_url     &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ media_type             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_url          &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_t.co         &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_expanded_url &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]$ ext_media_type         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ mentions_user_id       &lt;list&gt; [&quot;322411475&quot;, &quot;1888111382&quot;, &lt;&quot;2865404679&quot;, &quot;828915258211303424&quot;, &quot;342250615&quot;, &quot;140...$ mentions_screen_name   &lt;list&gt; [&quot;kateumbers&quot;, &quot;jasonbaik94&quot;, &lt;&quot;ma_salmon&quot;, &quot;dpprdan&quot;, &quot;rOpenSci&quot;, &quot;OpenCageData&quot;&gt;...$ lang                   &lt;chr&gt; &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;, &quot;en&quot;$ quoted_status_id       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ quoted_text            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ retweet_status_id      &lt;chr&gt; &quot;953179356574113793&quot;, &quot;952989197148749824&quot;, &quot;953234288530608129&quot;, &quot;9531017606960619...$ retweet_text           &lt;chr&gt; &quot;What to do if you have a compulsive data collating problem. #r #rstats #meta #ecol...$ place_url              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_name             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_full_name        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ place_type             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ country_code           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA$ geo_coords             &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ coords_coords          &lt;list&gt; [&lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;NA, NA&gt;, &lt;...$ bbox_coords            &lt;list&gt; [&lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, NA, NA, NA, NA, NA&gt;, &lt;NA, NA, NA, ...rtweets06 %&gt;%     tidytext::unnest_tokens(word, text) %&gt;%     select(screen_name, word) %&gt;%    slice(1:5)Error in unnest_tokens.data.frame(., word, text) :   unnest_tokens expects all columns of input to be atomic vectors (not lists)This doesn’t work because {rtweet} results now have list columns, whichthrows an error when we call unnest_tokens() from {tidytext} 0.1.5.The function checks if all the columns of the df are atomic.The new {tidytext} version prevents this behavior, as you can pass a dfcontaining listcolumns.# I&#39;m restarting R from RStudio here, to avaid internal error -3 in R_decompress1 error.rs.restartR()NULLRestarting R session...install.packages(&quot;tidytext&quot;, repos = &quot;http://cran.us.r-project.org&quot;, quiet = TRUE)  There is a binary version available but the source version is later:         binary source needs_compilationtidytext  0.1.5  0.1.6             FALSEinstalling the source package ‘tidytext’ packageVersion(&quot;tidytext&quot;)[1] ‘0.1.6’library(tidytext)library(dplyr)rtweets06 %&gt;%       unnest_tokens(word, text) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)# A tibble: 5 x 2    screen_name       word          &lt;chr&gt;      &lt;chr&gt;1 brian_leavell         rt2 brian_leavell kateumbers3 brian_leavell       what4 brian_leavell         to5 brian_leavell         doThis now works because {tidytext} no longer checks if all the columnsare atomic.Yet we’ve got an issue if we move to the hashtag column:rtweets06 %&gt;%       unnest_tokens(word, hashtag) %&gt;%       select(screen_name, word) %&gt;%      slice(1:5)Error in check_input(x) :   Input must be a character vector of any length or a list of character  vectors, each of which has a length of 1.In fact, the problem has moved: the function now checks at a lowerlevel: you can indeed use a df containing list-columns, but you can’tpass a list-column as input.Workaround for hashtag columnSo, as promised, here’s the workaround:library(purrr)as_vector(rtweets06$hashtags) %&gt;%       table() %&gt;%       as.data.frame() %&gt;%       arrange(Freq) %&gt;%       top_n(5)Selecting by Freq              . Freq1          data    12       ecology    13     evolution    14          meta    15  metaanalysis    16             r    17       dataviz    28       ggplot2    29   DataScience    310       rstats    9">
    <meta itemprop="datePublished" content="January 16, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Combining the new {rtweet} and {tidytext}
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minute(s) read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>About keeping your packages up to date.</p>

<p>I’ve received recently some mails and comments asking why the code in :</p>

<ul>
  <li>
    <p><a href="http://colinfay.me/collect-rtweet/">Collecting tweets with R and
{rtweet}</a></p>
  </li>
  <li>
    <p><a href="https://github.com/ColinFay/conf/blob/master/2017-11-budapest/fay_colin_text_data_ggplot2.pdf">Visualising text data with
ggplot2</a></p>
  </li>
</ul>

<p>couldn’t be reproduced.</p>

<p>Spoiler: this is due to the behavior of {tidytext}, which doesn’t accept
the output of the new {rtweet}. The problem is almost solved (well, it
has shifted, as you’ll see below). I thought the answer to these
comments and mails would also be the <strong>perfect occasion for me to talk a
little bit about how to return to previous versions of a package</strong> (and
also, to provide a little workaround about the current error thrown when
trying to mine the <code class="highlighter-rouge">hashtags</code> column of the {rtweet} output).</p>

<h2 id="new-rtweet-vs-previous-tidytext">New {rtweet} vs previous {tidytext}</h2>

<p>The update of {rtweet} was published on CRAN on 2017-11-16, (so after I
published the blogposts / slides I just mentioned). It comes with a new
feature: list columns.</p>

<p>Problem is: <strong>you can’t pass a data frame containing list-columns</strong> to
<code class="highlighter-rouge">unnest_tokens</code> in version 0.1.5 of {tidytext}. This was prevented by
the third to fifth lines of <code class="highlighter-rouge">tidytext:::unnest_tokens.data.frame</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">any</span><span class="p">(</span><span class="o">!</span><span class="n">purrr</span><span class="o">::</span><span class="n">map_lgl</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span><span class="w"> </span><span class="n">is.atomic</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">stop</span><span class="p">(</span><span class="s2">"unnest_tokens expects all columns of input to be atomic vectors (not lists)"</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="getting-back-to-a-previous-version-of-a-package">Getting back to a previous version of a package</h3>

<p>To examplify this {rtweet} and {tidytext} issue, <strong>let’s go back in time
to previous versions of theses packages</strong>. For this, we’ll use the
<code class="highlighter-rouge">install_version()</code> function from {devtools}:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span><span class="w">
</span><span class="n">install_version</span><span class="p">(</span><span class="s2">"rtweet"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.4.0"</span><span class="p">,</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://cran.us.r-project.org"</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">Downloading</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">http</span><span class="o">://</span><span class="n">cran.us.r</span><span class="o">-</span><span class="n">project.org</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="n">Archive</span><span class="o">/</span><span class="n">rtweet</span><span class="o">/</span><span class="n">rtweet_0.4.0.tar.gz</span><span class="w">
</span><span class="n">Installing</span><span class="w"> </span><span class="n">rtweet</span><span class="w">
</span><span class="s1">'/Library/Frameworks/R.framework/Resources/bin/R'</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">file</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">environ</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">save</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">restore</span><span class="w"> </span><span class="o">--</span><span class="n">quiet</span><span class="w"> </span><span class="n">CMD</span><span class="w">  </span><span class="err">\</span><span class="w">
  </span><span class="n">INSTALL</span><span class="w"> </span><span class="s1">'/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools766408992de/rtweet'</span><span class="w">  </span><span class="err">\</span><span class="w">
  </span><span class="o">--</span><span class="n">library</span><span class="o">=</span><span class="s1">'/Library/Frameworks/R.framework/Versions/3.4/Resources/library'</span><span class="w"> </span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">tests</span><span class="w"> 

</span><span class="o">*</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="o">*</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">‘</span><span class="n">rtweet</span><span class="err">’</span><span class="w"> </span><span class="n">...</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">‘</span><span class="n">rtweet</span><span class="err">’</span><span class="w"> </span><span class="n">correctement</span><span class="w"> </span><span class="n">d</span><span class="err">é</span><span class="n">compress</span><span class="err">é</span><span class="w"> </span><span class="n">et</span><span class="w"> </span><span class="n">sommes</span><span class="w"> </span><span class="n">MD5</span><span class="w"> </span><span class="n">v</span><span class="err">é</span><span class="n">rifi</span><span class="err">é</span><span class="n">es</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">R</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">inst</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">tests</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">preparing</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">lazy</span><span class="w"> </span><span class="n">loading</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">help</span><span class="w">
</span><span class="o">***</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">indices</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">indices</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">vignettes</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">testing</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="w">
</span><span class="o">*</span><span class="w"> </span><span class="n">DONE</span><span class="w"> </span><span class="p">(</span><span class="n">rtweet</span><span class="p">)</span><span class="w">

</span><span class="n">install_version</span><span class="p">(</span><span class="s2">"tidytext"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.1.5"</span><span class="p">,</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://cran.us.r-project.org"</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">Downloading</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">http</span><span class="o">://</span><span class="n">cran.us.r</span><span class="o">-</span><span class="n">project.org</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="n">Archive</span><span class="o">/</span><span class="n">tidytext</span><span class="o">/</span><span class="n">tidytext_0.1.5.tar.gz</span><span class="w">
</span><span class="n">Installing</span><span class="w"> </span><span class="n">tidytext</span><span class="w">
</span><span class="s1">'/Library/Frameworks/R.framework/Resources/bin/R'</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">file</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">environ</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">save</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">restore</span><span class="w"> </span><span class="o">--</span><span class="n">quiet</span><span class="w"> </span><span class="n">CMD</span><span class="w">  </span><span class="err">\</span><span class="w">
  </span><span class="n">INSTALL</span><span class="w"> </span><span class="s1">'/private/var/folders/lz/thnnmbpd1rz0h1tmyzgg0mh00000gn/T/RtmpPiXNRI/devtools7664a041fa4/tidytext'</span><span class="w">  </span><span class="err">\</span><span class="w">
  </span><span class="o">--</span><span class="n">library</span><span class="o">=</span><span class="s1">'/Library/Frameworks/R.framework/Versions/3.4/Resources/library'</span><span class="w"> </span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">tests</span><span class="w"> 

</span><span class="o">*</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="o">*</span><span class="n">source</span><span class="o">*</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">‘</span><span class="n">tidytext</span><span class="err">’</span><span class="w"> </span><span class="n">...</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">‘</span><span class="n">tidytext</span><span class="err">’</span><span class="w"> </span><span class="n">correctement</span><span class="w"> </span><span class="n">d</span><span class="err">é</span><span class="n">compress</span><span class="err">é</span><span class="w"> </span><span class="n">et</span><span class="w"> </span><span class="n">sommes</span><span class="w"> </span><span class="n">MD5</span><span class="w"> </span><span class="n">v</span><span class="err">é</span><span class="n">rifi</span><span class="err">é</span><span class="n">es</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">R</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">data</span><span class="w">
</span><span class="o">***</span><span class="w"> </span><span class="n">moving</span><span class="w"> </span><span class="n">datasets</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lazyload</span><span class="w"> </span><span class="n">DB</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">inst</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">tests</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">preparing</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">lazy</span><span class="w"> </span><span class="n">loading</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">help</span><span class="w">
</span><span class="o">***</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">indices</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">indices</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">installing</span><span class="w"> </span><span class="n">vignettes</span><span class="w">
</span><span class="o">**</span><span class="w"> </span><span class="n">testing</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="w">
</span><span class="o">*</span><span class="w"> </span><span class="n">DONE</span><span class="w"> </span><span class="p">(</span><span class="n">tidytext</span><span class="p">)</span><span class="w">

</span><span class="n">packageVersion</span><span class="p">(</span><span class="s2">"rtweet"</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="err">‘</span><span class="m">0.4.0</span><span class="err">’</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s2">"tidytext"</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="err">‘</span><span class="m">0.1.5</span><span class="err">’</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">rtweets04</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rtweet</span><span class="o">::</span><span class="n">search_tweets</span><span class="p">(</span><span class="s2">"#RStats"</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="n">Searching</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">tweets...</span><span class="w">
</span><span class="n">Finished</span><span class="w"> </span><span class="n">collecting</span><span class="w"> </span><span class="n">tweets</span><span class="o">!</span><span class="w">
 </span><span class="n">glimpse</span><span class="p">(</span><span class="n">rtweets04</span><span class="p">)</span><span class="w">
</span><span class="n">Observations</span><span class="o">:</span><span class="w"> </span><span class="m">77</span><span class="w">
</span><span class="n">Variables</span><span class="o">:</span><span class="w"> </span><span class="m">35</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">screen_name</span><span class="w">                    </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"brian_leavell"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Pranesh___K"</span><span class="p">,</span><span class="w"> </span><span class="s2">"OpenCageData"</span><span class="p">,</span><span class="w"> </span><span class="s2">"haseebmahmud"</span><span class="p">,</span><span class="w"> </span><span class="s2">"XihongLin"</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">user_id</span><span class="w">                        </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"770639488645300225"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1445945130"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1404653376"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15199563"</span><span class="p">,</span><span class="w"> </span><span class="s2">"893499404728...
$ created_at                     &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 ...
$ status_id                      &lt;chr&gt; "</span><span class="m">953248371606736896</span><span class="s2">", "</span><span class="m">953248285497573376</span><span class="s2">", "</span><span class="m">953248203708694528</span><span class="s2">", "</span><span class="m">95324813</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">text</span><span class="w">                           </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"RT @kateumbers: What to do if you have a compulsive data collating problem...
$ retweet_count                  &lt;int&gt; 1, 2, 2, 43, 6, 12, 12, 12, 43, 43, 6, 43, 43, 2, 43, 43, 6, 43, 0, 43, 43,...
$ favorite_count                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
$ is_quote_status                &lt;lgl&gt; TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...
$ quote_status_id                &lt;chr&gt; "</span><span class="m">953004640118874112</span><span class="s2">", NA, "</span><span class="m">953229496819306496</span><span class="s2">", NA, NA, NA, NA, NA, NA, NA,...
$ is_retweet                     &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU...
$ retweet_status_id              &lt;chr&gt; "</span><span class="m">953179356574113793</span><span class="s2">", "</span><span class="m">952989197148749824</span><span class="s2">", "</span><span class="m">953234288530608129</span><span class="s2">", "</span><span class="m">95310176</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">in_reply_to_status_status_id</span><span class="w">   </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">in_reply_to_status_user_id</span><span class="w">     </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">in_reply_to_status_screen_name</span><span class="w"> </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">lang</span><span class="w">                           </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en...
$ source                         &lt;chr&gt; "</span><span class="n">Twitter</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Android</span><span class="s2">", "</span><span class="n">Twitter</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Client</span><span class="s2">", "</span><span class="n">Twitter</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Client</span><span class="s2">", "</span><span class="n">Twitter...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">media_id</span><span class="w">                       </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">media_url</span><span class="w">                      </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">media_url_expanded</span><span class="w">             </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">urls</span><span class="w">                           </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">urls_display</span><span class="w">                   </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s2">"buff.ly/2DyyumE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rich-iannone.github.io/DiagrammeR/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"wp.me...
$ urls_expanded                  &lt;chr&gt; NA, NA, NA, "</span><span class="n">https</span><span class="o">://</span><span class="n">buff.ly</span><span class="o">/</span><span class="m">2</span><span class="n">DyyumE</span><span class="s2">", "</span><span class="n">http</span><span class="o">://</span><span class="n">rich</span><span class="o">-</span><span class="n">iannone.github.io</span><span class="o">/</span><span class="n">Diagr...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">mentions_screen_name</span><span class="w">           </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"kateumbers"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jasonbaik94"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ma_salmon dpprdan rOpenSci OpenCageData"</span><span class="p">,</span><span class="w"> </span><span class="s2">"da...
$ mentions_user_id               &lt;chr&gt; "</span><span class="m">322411475</span><span class="s2">", "</span><span class="m">1888111382</span><span class="s2">", "</span><span class="m">2865404679</span><span class="w"> </span><span class="m">828915258211303424</span><span class="w"> </span><span class="m">342250615</span><span class="w"> </span><span class="m">1404653</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">symbols</span><span class="w">                        </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">hashtags</span><span class="w">                       </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"r rstats meta ecology evolution data metaanalysis"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rstats"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rstats"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="n">r...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">coordinates</span><span class="w">                    </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_id</span><span class="w">                       </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_type</span><span class="w">                     </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_name</span><span class="w">                     </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_full_name</span><span class="w">                </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">country_code</span><span class="w">                   </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">country</span><span class="w">                        </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">bounding_box_coordinates</span><span class="w">       </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">bounding_box_type</span><span class="w">              </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="n">...</span><span class="w">
</span></code></pre></div></div>

<p>With these versions, you could simply do this (as you can find in the
slides):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rtweets04</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">tidytext</span><span class="o">::</span><span class="n">unnest_tokens</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">hashtags</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">select</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">slice</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="c1"># A tibble: 5 x 2</span><span class="w">
    </span><span class="n">screen_name</span><span class="w">      </span><span class="n">word</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w">     </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w">
</span><span class="m">1</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">         </span><span class="n">r</span><span class="w">
</span><span class="m">2</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">    </span><span class="n">rstats</span><span class="w">
</span><span class="m">3</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">      </span><span class="n">meta</span><span class="w">
</span><span class="m">4</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">   </span><span class="n">ecology</span><span class="w">
</span><span class="m">5</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w"> </span><span class="n">evolution</span><span class="w">
</span></code></pre></div></div>

<h3 id="rtweet-06">{rtweet} 0.6</h3>

<p>For a while, there were an issue while trying to use the two packages
together, as {rtweet} 0.6 was released on 2017-11-16, and {tidytext}
0.1.6 on 2018-01-07. When these two versions were used together, if you
tried to put the {rtweet} result into <code class="highlighter-rouge">unnest_tokens()</code>, you got an
error.</p>

<p>Let’s <strong>simulate this behavior</strong> by updating to {rtweet} 0.6, while
staying at {tidytext} 0.1.5.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">detach</span><span class="p">(</span><span class="s2">"package:rtweet"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"rtweet"</span><span class="p">,</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://cran.us.r-project.org"</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s2">"rtweet"</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="err">‘</span><span class="m">0.6.0</span><span class="err">’</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s2">"tidytext"</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="err">‘</span><span class="m">0.1.5</span><span class="err">’</span><span class="w">
</span></code></pre></div></div>

<p>So if I try to do the exact same thing:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">rtweet</span><span class="p">)</span><span class="w">
</span><span class="n">rtweets06</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">search_tweets</span><span class="p">(</span><span class="s2">"#RStats"</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="n">Searching</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">tweets...</span><span class="w">
</span><span class="n">Finished</span><span class="w"> </span><span class="n">collecting</span><span class="w"> </span><span class="n">tweets</span><span class="o">!</span><span class="w">
 </span><span class="n">glimpse</span><span class="p">(</span><span class="n">rtweets06</span><span class="p">)</span><span class="w">
</span><span class="n">Observations</span><span class="o">:</span><span class="w"> </span><span class="m">9</span><span class="w">
</span><span class="n">Variables</span><span class="o">:</span><span class="w"> </span><span class="m">42</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">status_id</span><span class="w">              </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"953248371606736896"</span><span class="p">,</span><span class="w"> </span><span class="s2">"953248285497573376"</span><span class="p">,</span><span class="w"> </span><span class="s2">"953248203708694528"</span><span class="p">,</span><span class="w"> </span><span class="s2">"9532481352031723...
$ created_at             &lt;dttm&gt; 2018-01-16 12:51:36, 2018-01-16 12:51:16, 2018-01-16 12:50:56, 2018-01-16 12:50:40...
$ user_id                &lt;chr&gt; "</span><span class="m">770639488645300225</span><span class="s2">", "</span><span class="m">1445945130</span><span class="s2">", "</span><span class="m">1404653376</span><span class="s2">", "</span><span class="m">15199563</span><span class="s2">", "</span><span class="m">893499404728053760</span><span class="s2">",...
$ screen_name            &lt;chr&gt; "</span><span class="n">brian_leavell</span><span class="s2">", "</span><span class="n">Pranesh___K</span><span class="s2">", "</span><span class="n">OpenCageData</span><span class="s2">", "</span><span class="n">haseebmahmud</span><span class="s2">", "</span><span class="n">XihongLin</span><span class="s2">", "</span><span class="n">sello...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">text</span><span class="w">                   </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"RT @kateumbers: What to do if you have a compulsive data collating problem. #r #rs...
$ source                 &lt;chr&gt; "</span><span class="n">Twitter</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Android</span><span class="s2">", "</span><span class="n">Twitter</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Client</span><span class="s2">", "</span><span class="n">Twitter</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Client</span><span class="s2">", "</span><span class="n">Twitter</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">iPh...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">reply_to_status_id</span><span class="w">     </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">reply_to_user_id</span><span class="w">       </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">reply_to_screen_name</span><span class="w">   </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">is_quote</span><span class="w">               </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">is_retweet</span><span class="w">             </span><span class="o">&lt;</span><span class="n">lgl</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">favorite_count</span><span class="w">         </span><span class="o">&lt;</span><span class="n">int</span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">retweet_count</span><span class="w">          </span><span class="o">&lt;</span><span class="n">int</span><span class="o">&gt;</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">43</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">43</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">hashtags</span><span class="w">               </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="s2">"r"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rstats"</span><span class="p">,</span><span class="w"> </span><span class="s2">"meta"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ecology"</span><span class="p">,</span><span class="w"> </span><span class="s2">"evolution"</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="p">,</span><span class="w"> </span><span class="s2">"metaanalysis"</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="s2">"rstats"</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">symbols</span><span class="w">                </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">]</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">urls_url</span><span class="w">               </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s2">"buff.ly/2DyyumE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rich-iannone.github.io/DiagrammeR/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"wp.me/pMm6L...
$ urls_t.co              &lt;list&gt; [NA, NA, NA, "</span><span class="n">https</span><span class="o">://</span><span class="n">t.co</span><span class="o">/</span><span class="n">gpTEhFhfY5</span><span class="s2">", "</span><span class="n">https</span><span class="o">://</span><span class="n">t.co</span><span class="o">/</span><span class="n">TZdttVMrTf</span><span class="s2">", "</span><span class="n">https</span><span class="o">://</span><span class="n">t.co</span><span class="o">/</span><span class="m">4</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">urls_expanded_url</span><span class="w">      </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s2">"https://buff.ly/2DyyumE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"http://rich-iannone.github.io/DiagrammeR/...
$ media_url              &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ media_t.co             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ media_expanded_url     &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ media_type             &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ ext_media_url          &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ ext_media_t.co         &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ ext_media_expanded_url &lt;list&gt; [NA, NA, NA, NA, NA, NA, NA, NA, NA]
$ ext_media_type         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA
$ mentions_user_id       &lt;list&gt; ["</span><span class="m">322411475</span><span class="s2">", "</span><span class="m">1888111382</span><span class="s2">", &lt;"</span><span class="m">2865404679</span><span class="s2">", "</span><span class="m">828915258211303424</span><span class="s2">", "</span><span class="m">342250615</span><span class="s2">", "</span><span class="m">140</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">mentions_screen_name</span><span class="w">   </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="s2">"kateumbers"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jasonbaik94"</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="s2">"ma_salmon"</span><span class="p">,</span><span class="w"> </span><span class="s2">"dpprdan"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rOpenSci"</span><span class="p">,</span><span class="w"> </span><span class="s2">"OpenCageData"</span><span class="o">&gt;</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">lang</span><span class="w">                   </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">quoted_status_id</span><span class="w">       </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">quoted_text</span><span class="w">            </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">retweet_status_id</span><span class="w">      </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="s2">"953179356574113793"</span><span class="p">,</span><span class="w"> </span><span class="s2">"952989197148749824"</span><span class="p">,</span><span class="w"> </span><span class="s2">"953234288530608129"</span><span class="p">,</span><span class="w"> </span><span class="s2">"9531017606960619...
$ retweet_text           &lt;chr&gt; "</span><span class="n">What</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">compulsive</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">collating</span><span class="w"> </span><span class="n">problem.</span><span class="w"> </span><span class="c1">#r #rstats #meta #ecol...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_url</span><span class="w">              </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_name</span><span class="w">             </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_full_name</span><span class="w">        </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">place_type</span><span class="w">             </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">country</span><span class="w">                </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">country_code</span><span class="w">           </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">geo_coords</span><span class="w">             </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">coords_coords</span><span class="w">          </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">...</span><span class="w">
</span><span class="o">$</span><span class="w"> </span><span class="n">bbox_coords</span><span class="w">            </span><span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="w">

</span><span class="n">rtweets06</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">tidytext</span><span class="o">::</span><span class="n">unnest_tokens</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">select</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">slice</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="n">Error</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">unnest_tokens.data.frame</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> 
  </span><span class="n">unnest_tokens</span><span class="w"> </span><span class="n">expects</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">atomic</span><span class="w"> </span><span class="n">vectors</span><span class="w"> </span><span class="p">(</span><span class="n">not</span><span class="w"> </span><span class="n">lists</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This doesn’t work because {rtweet} results now have list columns, which
throws an error when we call <code class="highlighter-rouge">unnest_tokens()</code> from {tidytext} 0.1.5.
The function checks if all the columns of the df are atomic.</p>

<p>The new {tidytext} version prevents this behavior, as you can pass a df
containing list
columns.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># I'm restarting R from RStudio here, to avaid internal error -3 in R_decompress1 error</span><span class="w">
</span><span class="n">.rs.restartR</span><span class="p">()</span><span class="w">
</span><span class="kc">NULL</span><span class="w">

</span><span class="n">Restarting</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">session...</span><span class="w">

</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"tidytext"</span><span class="p">,</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://cran.us.r-project.org"</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

  </span><span class="n">There</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">binary</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">later</span><span class="o">:</span><span class="w">
         </span><span class="n">binary</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">needs_compilation</span><span class="w">
</span><span class="n">tidytext</span><span class="w">  </span><span class="m">0.1.5</span><span class="w">  </span><span class="m">0.1.6</span><span class="w">             </span><span class="kc">FALSE</span><span class="w">

</span><span class="n">installing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">‘</span><span class="n">tidytext</span><span class="err">’</span><span class="w">

 
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s2">"tidytext"</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="err">‘</span><span class="m">0.1.6</span><span class="err">’</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">tidytext</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rtweets06</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">unnest_tokens</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">select</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">slice</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="c1"># A tibble: 5 x 2</span><span class="w">
    </span><span class="n">screen_name</span><span class="w">       </span><span class="n">word</span><span class="w">
          </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w">      </span><span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="w">
</span><span class="m">1</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">         </span><span class="n">rt</span><span class="w">
</span><span class="m">2</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w"> </span><span class="n">kateumbers</span><span class="w">
</span><span class="m">3</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">       </span><span class="n">what</span><span class="w">
</span><span class="m">4</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">         </span><span class="n">to</span><span class="w">
</span><span class="m">5</span><span class="w"> </span><span class="n">brian_leavell</span><span class="w">         </span><span class="n">do</span><span class="w">
</span></code></pre></div></div>

<p>This now works because {tidytext} no longer checks if all the columns
are atomic.</p>

<p>Yet we’ve got an issue if we move to the <code class="highlighter-rouge">hashtag</code> column:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rtweets06</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">unnest_tokens</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">hashtag</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">select</span><span class="p">(</span><span class="n">screen_name</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">slice</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="n">Error</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">check_input</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> 
  </span><span class="n">Input</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">character</span><span class="w">
  </span><span class="n">vectors</span><span class="p">,</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="m">1</span><span class="n">.</span><span class="w">
</span></code></pre></div></div>

<p>In fact, <strong>the problem has moved</strong>: the function now checks at a lower
level: you can indeed use a df containing list-columns, but you can’t
pass a list-column as input.</p>

<h2 id="workaround-for-hashtag-column">Workaround for hashtag column</h2>

<p>So, as promised, here’s the workaround:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">purrr</span><span class="p">)</span><span class="w">
</span><span class="n">as_vector</span><span class="p">(</span><span class="n">rtweets06</span><span class="o">$</span><span class="n">hashtags</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">table</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">as.data.frame</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">arrange</span><span class="p">(</span><span class="n">Freq</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">top_n</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="n">Selecting</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">Freq</span><span class="w">
              </span><span class="n">.</span><span class="w"> </span><span class="n">Freq</span><span class="w">
</span><span class="m">1</span><span class="w">          </span><span class="n">data</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">2</span><span class="w">       </span><span class="n">ecology</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">3</span><span class="w">     </span><span class="n">evolution</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">4</span><span class="w">          </span><span class="n">meta</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="n">metaanalysis</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">6</span><span class="w">             </span><span class="n">r</span><span class="w">    </span><span class="m">1</span><span class="w">
</span><span class="m">7</span><span class="w">       </span><span class="n">dataviz</span><span class="w">    </span><span class="m">2</span><span class="w">
</span><span class="m">8</span><span class="w">       </span><span class="n">ggplot2</span><span class="w">    </span><span class="m">2</span><span class="w">
</span><span class="m">9</span><span class="w">   </span><span class="n">DataScience</span><span class="w">    </span><span class="m">3</span><span class="w">
</span><span class="m">10</span><span class="w">       </span><span class="n">rstats</span><span class="w">    </span><span class="m">9</span><span class="w">
</span></code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#package" class="page__taxonomy-item" rel="tag">package</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#rtweet" class="page__taxonomy-item" rel="tag">rtweet</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#tidytext" class="page__taxonomy-item" rel="tag">tidytext</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#r-blog-en" class="page__taxonomy-item" rel="tag">r-blog-en</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-01-16T00:00:00+01:00">January 16, 2018</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=_ColinFay&text=Combining+the+new+%7Brtweet%7D+and+%7Btidytext%7D%20http%3A%2F%2Flocalhost%3A4000%2Frtweet-tidytext%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Frtweet-tidytext%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http%3A%2F%2Flocalhost%3A4000%2Frtweet-tidytext%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Frtweet-tidytext%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/dancing-banana-r-package-doc/" class="pagination--pager" title="[How to] Include a dancing banana in your R package documentation
">←</a>
    
    
      <a href="/active-binding-r-enigma/" class="pagination--pager" title="Can (a==1 &amp; a==2 &amp; a==3) ever evaluate to TRUE?
">→</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">The machine thinks you might also like:</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <li class="archive__item-title" itemprop="headline">
      <span>
        
        <a href="/js-const-r/" rel="permalink">JavaScript const in R
</a>
      
      </span>
      <span class="page__meta" >
        
      —  <i>2019-09-23</i>
    
      </span>
    </li>
    
    <!--<p class="archive__item-excerpt" itemprop="description">One thing I like about JavaScript is the const declaration method,
which allows you to declare a variable one time, and that variable can’t
be reassigned aft...</p>-->
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <li class="archive__item-title" itemprop="headline">
      <span>
        
        <a href="/one-week-shiny-google-search/" rel="permalink">One week as a Shiny dev, seen through Google search
</a>
      
      </span>
      <span class="page__meta" >
        
      —  <i>2019-09-08</i>
    
      </span>
    </li>
    
    <!--<p class="archive__item-excerpt" itemprop="description">Some days ago I read an article on dev.to, entitled
something like “Googling as a Software Engineer”
link
which links to this
blogpost
from Sophie Koonin. An...</p>-->
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <li class="archive__item-title" itemprop="headline">
      <span>
        
        <a href="/playing-with-dolt-one/" rel="permalink">Playing with dolt - Part One
</a>
      
      </span>
      <span class="page__meta" >
        
      —  <i>2019-08-17</i>
    
      </span>
    </li>
    
    <!--<p class="archive__item-excerpt" itemprop="description">A few weeks back, I subscribed to become a beta tester for dolt, the
“Git for data”. This post is the first of a series of posts
exploring this tool.

What i...</p>-->
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <li class="archive__item-title" itemprop="headline">
      <span>
        
        <a href="/back-from-toulouse/" rel="permalink">Back from useR! 2019
</a>
      
      </span>
      <span class="page__meta" >
        
      —  <i>2019-07-14</i>
    
      </span>
    </li>
    
    <!--<p class="archive__item-excerpt" itemprop="description">I’m back from useR! 2019!, Toulouse, where I gave one talk and a
workshop. Here are the links to the materials.

2019-07-08

Contributing to the R ecosystem
...</p>-->
  </article>
</div>
        
      </div>
    </div>
  
</div>
    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Get social:</strong></li>
    
    
      <li><a href="https://twitter.com/_ColinFay"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="https://github.com/ColinFay"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    
      <li><a href="https://www.linkedin.com/in/colinfay"><i class="fab fa-fw fa-linkedin-in" aria-hidden="true"></i> LinkedIn</a></li>
    
     
        <li>
          <a href="mailto:">
            <meta itemprop="email" content="" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Colin Fay. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a>, built on top of the <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a> jekyll theme. </div>

<div class="page__footer-copyright">All blog posts are aggregated to <a href = "https://www.r-bloggers.com/">R-bloggers</a> and <a href="http://www.rweekly.org">RWeekly</a>.</div>

<div class="page__footer-copyright">All written content on this blog is released under the <a href = "https://creativecommons.org/licenses/by-nc-sa/4.0//">CC BY-NC-SA 4.0</a> license, with the exception of code which is released under the <a href="https://opensource.org/licenses/mit-license.php">MIT</a> license</div>.

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/rtweet-tidytext/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/rtweet-tidytext"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://http-colinfay-me.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>